{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/bismillah/Desktop/eveninghobby/receipts-react-native/src/components/receipts/CaptureReceipt.js\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport constants, { hasNotch } from \"../common/constants\";\nimport { theme } from \"../common/styles\";\nimport { Camera } from 'expo-camera';\nimport * as ImagePicker from 'expo-image-picker';\nimport SingleDataTemplate from \"../transactions/details/SingleDataTemplate\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { MaterialIcons } from \"@expo/vector-icons\";\nimport { connect } from \"react-redux\";\nimport { AntDesign, MaterialCommunityIcons } from '@expo/vector-icons';\nimport GradientBackground from \"../common/GradientBackground\";\nimport TopToolbar from \"./TopToolbar\";\n\nvar CaptureReceipt = function CaptureReceipt(props) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      newImg = _useState2[0],\n      setNewImg = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      hasPermission = _useState4[0],\n      setHasPermission = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isCameraReady = _useState6[0],\n      setIsCameraReady = _useState6[1];\n\n  var capturedImage = '';\n  useEffect(function () {\n    (function _callee() {\n      var _await$Camera$request, status;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Camera.requestPermissionsAsync());\n\n            case 2:\n              _await$Camera$request = _context.sent;\n              status = _await$Camera$request.status;\n              setHasPermission(status === \"granted\");\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n\n  var onCameraReady = function onCameraReady() {\n    setIsCameraReady(true);\n  };\n\n  function takeAndUploadPhotoAsync() {\n    var photo;\n    return _regeneratorRuntime.async(function takeAndUploadPhotoAsync$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(cam.takePictureAsync());\n\n          case 2:\n            photo = _context2.sent;\n            capturedImage = photo[\"uri\"];\n            props.navigation.navigate(\"AddReceipt\", {\n              img: capturedImage\n            });\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  var cam = null;\n\n  if (hasPermission === null) {\n    return React.createElement(View, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 16\n      }\n    });\n  }\n\n  if (hasPermission === false) {\n    return React.createElement(Text, {\n      style: styles.text,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 16\n      }\n    }, \"No access to camera\");\n  }\n\n  if (!newImg) {\n    var toolbarHeight = hasNotch() ? 100 : constants.windowHeight * 0.1;\n    var cameraHeight = constants.windowHeight * 0.7;\n    var iconSpace = constants.windowHeight - toolbarHeight - cameraHeight;\n    var captureIconSize = constants.windowHeight * 0.1;\n    return React.createElement(GradientBackground, {\n      colors: [theme.subleSecondary, theme.subtlePrimary],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    }, React.createElement(TopToolbar, _extends({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }\n    })), React.createElement(View, {\n      style: {\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }\n    }, React.createElement(Camera, {\n      style: {\n        height: cameraHeight,\n        width: constants.windowWidth\n      },\n      type: Camera.Constants.Type.back,\n      flashMode: Camera.Constants.FlashMode.off,\n      onCameraReady: onCameraReady,\n      onMountError: function onMountError(error) {\n        console.log(\"camera error\");\n      },\n      ref: function ref(camera) {\n        return cam = camera;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }\n    }), React.createElement(TouchableOpacity, {\n      onPress: takeAndUploadPhotoAsync,\n      containerStyle: {\n        height: iconSpace,\n        justifyContent: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }\n    }, React.createElement(Image, {\n      resizeMode: \"stretch\",\n      style: {\n        height: captureIconSize,\n        width: captureIconSize\n      },\n      source: require(\"../../../assets/circle.png\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 25\n      }\n    }))));\n  } else {\n    return React.createElement(View, {\n      style: {\n        justifyContent: \"center\",\n        alignItems: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, React.createElement(Image, {\n      style: {\n        height: constants.windowHeight,\n        width: constants.windowWidth,\n        resizeMode: \"contain\"\n      },\n      source: {\n        uri: newImg\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }));\n  }\n};\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    addSingleReceipt: function addSingleReceipt(receipt) {\n      return dispatch({\n        type: \"ADD_SINGLE_RECEIPT\",\n        receipt: receipt\n      });\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CaptureReceipt);\nvar styles = StyleSheet.create({\n  newAccountContainer: {\n    alignItems: \"center\",\n    backgroundColor: theme.primary,\n    borderRadius: 10\n  }\n});","map":{"version":3,"sources":["/Users/bismillah/Desktop/eveninghobby/receipts-react-native/src/components/receipts/CaptureReceipt.js"],"names":["React","useEffect","useState","constants","hasNotch","theme","Camera","ImagePicker","SingleDataTemplate","TouchableOpacity","MaterialIcons","connect","AntDesign","MaterialCommunityIcons","GradientBackground","TopToolbar","CaptureReceipt","props","newImg","setNewImg","hasPermission","setHasPermission","isCameraReady","setIsCameraReady","capturedImage","requestPermissionsAsync","status","onCameraReady","takeAndUploadPhotoAsync","cam","takePictureAsync","photo","navigation","navigate","img","styles","text","toolbarHeight","windowHeight","cameraHeight","iconSpace","captureIconSize","subleSecondary","subtlePrimary","justifyContent","alignItems","height","width","windowWidth","Constants","Type","back","FlashMode","off","error","console","log","camera","require","resizeMode","uri","mapStateToProps","state","mapDispatchToProps","dispatch","addSingleReceipt","receipt","type","StyleSheet","create","newAccountContainer","backgroundColor","primary","borderRadius"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { View, StyleSheet, Text, Button, ActivityIndicator, Image } from \"react-native\";\nimport constants, { hasNotch } from \"../common/constants\";\nimport { theme } from '../common/styles';\nimport { Camera } from 'expo-camera';\nimport * as ImagePicker from 'expo-image-picker';\nimport SingleDataTemplate from \"../transactions/details/SingleDataTemplate\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { MaterialIcons } from \"@expo/vector-icons\";\nimport { connect } from \"react-redux\";\nimport { AntDesign, MaterialCommunityIcons } from '@expo/vector-icons';\nimport GradientBackground from \"../common/GradientBackground\";\nimport TopToolbar from \"./TopToolbar\";\n\nconst CaptureReceipt = props => {\n\n    const [newImg, setNewImg] = useState(null);\n    const [hasPermission, setHasPermission] = useState(null);\n    const [isCameraReady, setIsCameraReady] = useState(false);\n\n    let capturedImage = ''\n\n\n    useEffect(() => {\n        (async () => {\n            const { status } = await Camera.requestPermissionsAsync();\n            setHasPermission(status === \"granted\");\n        })();\n    }, []);\n\n    const onCameraReady = () => {\n        setIsCameraReady(true);\n    };\n\n    async function takeAndUploadPhotoAsync() {\n        let photo = await cam.takePictureAsync()\n\n        capturedImage = photo[\"uri\"]\n\n\n        props.navigation.navigate(\"AddReceipt\", {img: capturedImage})\n\n    }\n\n    let cam = null\n\n    if (hasPermission === null) {\n        return <View />;\n    }\n    if (hasPermission === false) {\n        return <Text style={styles.text}>No access to camera</Text>;\n    }\n\n    if (!newImg) {\n\n        var toolbarHeight = hasNotch() ? 100 : constants.windowHeight * 0.1\n        var cameraHeight = constants.windowHeight * 0.7\n        var iconSpace = constants.windowHeight - toolbarHeight - cameraHeight\n        var captureIconSize = constants.windowHeight * 0.1\n\n        return (\n            < GradientBackground colors={[theme.subleSecondary, theme.subtlePrimary]} >\n                <TopToolbar {...props}/>\n                <View style={{ justifyContent: \"center\", alignItems: \"center\" }}>\n                    <Camera style={{ height: cameraHeight, width: constants.windowWidth }}\n                        type={Camera.Constants.Type.back} flashMode={Camera.Constants.FlashMode.off}\n                        onCameraReady={onCameraReady} onMountError={(error) => { console.log(\"camera error\") }}\n                        ref={camera => cam = camera} />\n\n                    <TouchableOpacity onPress={takeAndUploadPhotoAsync} containerStyle={{ height: iconSpace, justifyContent: \"center\" }} >\n                        <Image resizeMode=\"stretch\" style={{height: captureIconSize, width: captureIconSize}} source={require('../../../assets/circle.png')} />\n                    </TouchableOpacity>\n                </View>\n            </ GradientBackground>\n        );\n    } else {\n        return (\n            <View style={{ justifyContent: \"center\", alignItems: \"center\" }}>\n                <Image style={{ height: constants.windowHeight, width: constants.windowWidth, resizeMode: \"contain\" }} source={{ uri: newImg }} />\n            </View>\n        )\n    }\n}\n\nfunction mapStateToProps(state) {\n    return {\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        addSingleReceipt: (receipt) => dispatch({ type: \"ADD_SINGLE_RECEIPT\", receipt: receipt })\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CaptureReceipt)\n\nvar styles = StyleSheet.create({\n    newAccountContainer: {\n        alignItems: \"center\",\n        backgroundColor: theme.primary,\n        borderRadius: 10\n\n    }\n});"]},"metadata":{},"sourceType":"module"}