{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nvar _jsxFileName = \"/Users/bismillah/Desktop/eveninghobby/receipts-react-native/src/components/receipts/Receipts.js\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport constants, { uuidv4, getFormattedDate } from \"../common/constants\";\nimport ReceiptsBottomToolbar from \"./ReceiptsBottomToolbar\";\nimport { ScrollView, TouchableOpacity, FlatList } from \"react-native-gesture-handler\";\nimport GradientBackground from \"../common/GradientBackground\";\nimport { theme } from \"../common/styles\";\nimport SingleReceipt from \"./SingleReceipt\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { connect } from \"react-redux\";\n\nvar Receipts = function Receipts(props) {\n  useEffect(function () {\n    var request_body = JSON.stringify({\n      \"test\": \"testVal\"\n    });\n    fetch(constants.ngrokHost + 'receipt/', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: request_body\n    }).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      props.setReceipt(json);\n    });\n  }, []);\n  console.log(\"im in receipts\");\n\n  var renderItem = function renderItem(_ref) {\n    var item = _ref.item,\n        index = _ref.index;\n\n    if (props.deletedItems[item[\"uuid_str\"]]) {\n      return React.createElement(React.Fragment, null);\n    }\n\n    var tmpIndex = index - 1;\n\n    while (tmpIndex >= 0 && props.deletedItems[props.allReceipts[tmpIndex][\"uuid_str\"]]) {\n      tmpIndex = tmpIndex - 1;\n    }\n\n    var prev_dt = '';\n\n    if (tmpIndex >= 0) {\n      prev_dt = props.allReceipts[tmpIndex][\"createdAt_str\"];\n    }\n\n    return React.createElement(SingleReceipt, _extends({}, props, {\n      value: item,\n      prev_dt: prev_dt,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 16\n      }\n    }));\n  };\n\n  if (!props.allReceipts) {\n    return React.createElement(GradientBackground, {\n      colors: [theme.subleSecondary, theme.subtlePrimary],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }\n    }, React.createElement(View, {\n      style: {\n        justifyContent: \"center\",\n        alignContent: \"center\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }\n    }, React.createElement(ActivityIndicator, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }\n    })), React.createElement(ReceiptsBottomToolbar, _extends({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    })));\n  } else {\n    return React.createElement(GradientBackground, {\n      colors: [theme.subleSecondary, theme.subtlePrimary],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }\n    }, React.createElement(SafeAreaView, {\n      style: {\n        height: constants.windowHeight - 55\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }\n    }, React.createElement(FlatList, {\n      bounces: false,\n      data: props.allReceipts,\n      renderItem: renderItem,\n      keyExtractor: function keyExtractor(item) {\n        return item[\"uuid_str\"];\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }\n    })), React.createElement(ReceiptsBottomToolbar, _extends({}, props, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    })));\n  }\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  visit: {\n    fontWeight: '300',\n    fontSize: 16,\n    color: \"black\",\n    marginBottom: 3\n  },\n  textContainer: {\n    borderBottomWidth: 2,\n    marginBottom: 10,\n    width: constants.windowWidth - 50\n  },\n  square: {\n    alignSelf: \"center\",\n    borderColor: \"#3e424b\",\n    width: \"95%\",\n    marginBottom: 8,\n    borderWidth: 0.7\n  }\n});\n\nfunction mapStateToProps(state) {\n  return {\n    allReceipts: state.AllReceiptsReducer.allReceipts,\n    toggleUpdate: state.AllReceiptsReducer.toggleUpdate,\n    deletedItems: state.ReceiptSelectorReducer.deletedItems\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    setReceipt: function setReceipt(receipts) {\n      return dispatch({\n        type: \"SET_RECEIPTS\",\n        receipts: receipts\n      });\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Receipts);","map":{"version":3,"sources":["/Users/bismillah/Desktop/eveninghobby/receipts-react-native/src/components/receipts/Receipts.js"],"names":["React","useEffect","useState","constants","uuidv4","getFormattedDate","ReceiptsBottomToolbar","ScrollView","TouchableOpacity","FlatList","GradientBackground","theme","SingleReceipt","SafeAreaView","connect","Receipts","props","request_body","JSON","stringify","fetch","ngrokHost","method","headers","Accept","body","then","response","json","setReceipt","console","log","renderItem","item","index","deletedItems","tmpIndex","allReceipts","prev_dt","subleSecondary","subtlePrimary","justifyContent","alignContent","height","windowHeight","styles","StyleSheet","create","container","flex","alignItems","visit","fontWeight","fontSize","color","marginBottom","textContainer","borderBottomWidth","width","windowWidth","square","alignSelf","borderColor","borderWidth","mapStateToProps","state","AllReceiptsReducer","toggleUpdate","ReceiptSelectorReducer","mapDispatchToProps","dispatch","receipts","type"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { View, StyleSheet, Text, Button, ActivityIndicator, Image } from \"react-native\";\nimport constants, { uuidv4, getFormattedDate } from '../common/constants'\nimport ReceiptsBottomToolbar from \"./ReceiptsBottomToolbar\";\nimport { ScrollView, TouchableOpacity, FlatList } from \"react-native-gesture-handler\";\nimport GradientBackground from \"../common/GradientBackground\";\nimport { theme } from \"../common/styles\";\nimport SingleReceipt from \"./SingleReceipt\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { connect } from \"react-redux\";\n\n\nconst Receipts = props => {\n\n    // console.log(\"I'm in receipts\")\n\n    useEffect(() => {\n        var request_body = JSON.stringify({\n            \"test\": \"testVal\"\n        })\n\n        fetch(constants.ngrokHost + 'receipt/', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: request_body\n        }).then((response) => response.json())\n            .then((json) => { props.setReceipt(json) })\n    }, []);\n\n    console.log(\"im in receipts\")\n\n    const renderItem = ({ item, index }) => {\n        if (props.deletedItems[item[\"uuid_str\"]]) {\n            return <></>\n        }\n        var tmpIndex = index - 1\n        while (tmpIndex >= 0 && props.deletedItems[props.allReceipts[tmpIndex][\"uuid_str\"]]) {\n            tmpIndex = tmpIndex - 1\n        }\n\n        let prev_dt = ''\n        if (tmpIndex >= 0) {\n            prev_dt = props.allReceipts[tmpIndex][\"createdAt_str\"]\n        }\n        return <SingleReceipt {...props} value={item} prev_dt={prev_dt} />\n    }\n\n    if (!props.allReceipts) {\n        return (\n            < GradientBackground colors={[theme.subleSecondary, theme.subtlePrimary]} >\n                <View style={{ justifyContent: \"center\", alignContent: \"center\" }}>\n                    <ActivityIndicator />\n                </View>\n                <ReceiptsBottomToolbar {...props} />\n            </ GradientBackground>\n        )\n    } else {\n        return (\n            < GradientBackground colors={[theme.subleSecondary, theme.subtlePrimary]} >\n                <SafeAreaView style={{height: constants.windowHeight - 55}}>\n                    <FlatList\n                        bounces={false}\n                        data={props.allReceipts}\n                        renderItem={renderItem}\n                        keyExtractor={item => item[\"uuid_str\"]} />\n                </SafeAreaView>\n                <ReceiptsBottomToolbar {...props} />\n            </ GradientBackground >\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n    },\n    visit: {\n        fontWeight: '300',\n        fontSize: 16,\n        color: \"black\",\n        marginBottom: 3\n    },\n    textContainer: {\n        borderBottomWidth: 2,\n        marginBottom: 10,\n        width: constants.windowWidth - 50,\n    },\n    square: {\n        alignSelf: \"center\",\n        borderColor: \"#3e424b\",\n        width: \"95%\",\n        marginBottom: 8,\n        borderWidth: 0.7,\n    },\n});\n\n\nfunction mapStateToProps(state) {\n    return {\n        allReceipts: state.AllReceiptsReducer.allReceipts,\n        toggleUpdate: state.AllReceiptsReducer.toggleUpdate,\n        deletedItems: state.ReceiptSelectorReducer.deletedItems\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        setReceipt: (receipts) => dispatch({ type: \"SET_RECEIPTS\", receipts: receipts })\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Receipts)\n"]},"metadata":{},"sourceType":"module"}