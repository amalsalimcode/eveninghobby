{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _jsxFileName = \"/Users/bismillah/Desktop/eveninghobby/receipts-react-native/src/components/transactions/graph/BarGraph.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useRef } from 'react';\nimport SingleBarGraph from \"./SingleBarGraph\";\nimport { connect } from 'react-redux';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport DashedLine from \"./DashedLine\";\nimport { theme } from \"../../common/styles\";\n\nvar BarGraph = function BarGraph(props) {\n  var panResponder = useRef(PanResponder.create({\n    onMoveShouldSetPanResponder: function onMoveShouldSetPanResponder() {\n      return true;\n    },\n    onPanResponderRelease: function onPanResponderRelease(evt, gestureState) {\n      if (gestureState.dx > 1) {\n        props.changeCurWeek(-1);\n      } else if (gestureState.dx < 1) {\n        props.changeCurWeek(1);\n      }\n    }\n  })).current;\n  useEffect(function () {\n    props.clearEnabledBars();\n    props.clearDataLoaded();\n    props.clearAccountInfo();\n  }, [props.curDate]);\n\n  function bar_layout() {\n    var idx = 0;\n    var bars = [];\n\n    for (idx = 0; idx < props.bar_data.length; idx++) {\n      var uuid = idx.toString();\n      bars.push(React.createElement(SingleBarGraph, {\n        uuid: uuid,\n        key: uuid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 23\n        }\n      }));\n    }\n\n    return React.createElement(React.Fragment, null, bars);\n  }\n\n  function x_axis_layout() {\n    var days = [\"Sat\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\"];\n    var days_layout = [];\n    var idx = 0;\n\n    for (idx = 0; idx < days.length; idx++) {\n      days_layout.push(React.createElement(Text, {\n        style: styles.day,\n        key: idx.toString(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 30\n        }\n      }, days[idx]));\n    }\n\n    return React.createElement(React.Fragment, null, days_layout);\n  }\n\n  if (!props.dataLoaded) {\n    return React.createElement(React.Fragment, null, React.createElement(View, {\n      style: _objectSpread(_objectSpread({}, styles.plot_container), {}, {\n        justifyContent: \"center\",\n        alignContent: \"center\"\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }, React.createElement(ActivityIndicator, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }\n    })), React.createElement(View, {\n      style: styles.x_axis,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, x_axis_layout()));\n  } else {\n    return React.createElement(React.Fragment, null, React.createElement(View, {\n      style: styles.plot_container,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, React.createElement(DashedLine, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }), React.createElement(Animated.View, _extends({}, panResponder.panHandlers, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }), React.createElement(View, {\n      style: styles.values_container,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }\n    }, bar_layout()))), React.createElement(View, {\n      style: styles.x_axis,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    }, x_axis_layout()));\n  }\n};\n\nvar styles = StyleSheet.create({\n  plot_container: {\n    height: 150\n  },\n  values_container: {\n    flexDirection: \"row\",\n    alignItems: \"flex-end\",\n    justifyContent: \"center\",\n    height: \"100%\"\n  },\n  x_axis: {\n    backgroundColor: theme.subtlePrimary,\n    height: 30,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    opacity: 0.7\n  },\n  day: {\n    marginHorizontal: 12\n  }\n});\n\nfunction mapStateToProps(state) {\n  return {\n    bar_data: state.TransactionsReducer.bar_data,\n    meta: state.TransactionsReducer.meta_data,\n    curDate: state.TransactionsReducer.meta_data.fullDate,\n    dataLoaded: state.BarSummaryReducer.dataLoaded\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    clearEnabledBars: function clearEnabledBars() {\n      return dispatch({\n        type: \"CLEAR_ENABLED_BARS\"\n      });\n    },\n    changeCurWeek: function changeCurWeek(direction) {\n      return dispatch({\n        type: \"CHANGE_CUR_WEEK\",\n        direction: direction\n      });\n    },\n    clearDataLoaded: function clearDataLoaded() {\n      return dispatch({\n        type: \"CLEAR_TOTAL_EXPENSES_LOADED\"\n      });\n    },\n    clearAccountInfo: function clearAccountInfo() {\n      return dispatch({\n        type: \"CLEAR_ACCOUNT_INFO\"\n      });\n    }\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BarGraph);","map":{"version":3,"sources":["/Users/bismillah/Desktop/eveninghobby/receipts-react-native/src/components/transactions/graph/BarGraph.js"],"names":["React","useEffect","useRef","SingleBarGraph","connect","DashedLine","theme","BarGraph","props","panResponder","PanResponder","create","onMoveShouldSetPanResponder","onPanResponderRelease","evt","gestureState","dx","changeCurWeek","current","clearEnabledBars","clearDataLoaded","clearAccountInfo","curDate","bar_layout","idx","bars","bar_data","length","uuid","toString","push","x_axis_layout","days","days_layout","styles","day","dataLoaded","plot_container","justifyContent","alignContent","x_axis","panHandlers","values_container","StyleSheet","height","flexDirection","alignItems","backgroundColor","subtlePrimary","opacity","marginHorizontal","mapStateToProps","state","TransactionsReducer","meta","meta_data","fullDate","BarSummaryReducer","mapDispatchToProps","dispatch","type","direction"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from 'react'\nimport SingleBarGraph from './SingleBarGraph'\nimport { connect } from 'react-redux'\nimport { View, StyleSheet, Text, PanResponder, Animated, ActivityIndicator } from 'react-native'\nimport DashedLine from './DashedLine'\nimport { theme } from '../../common/styles'\n\n\nconst BarGraph = props => {\n\n    const panResponder = useRef(PanResponder.create({\n        onMoveShouldSetPanResponder: () => true,\n        onPanResponderRelease: (evt, gestureState) => {\n            if (gestureState.dx > 1) {\n                props.changeCurWeek(-1)\n            } else if (gestureState.dx < 1) {\n                props.changeCurWeek(1)\n            }\n        }\n    })).current;\n\n    useEffect(() => {\n        props.clearEnabledBars();\n        props.clearDataLoaded();\n        // this is making accounts become rendered extra for some reason\n        props.clearAccountInfo();\n    }, [props.curDate]);\n\n    function bar_layout() {\n\n        var idx = 0;\n        var bars = []\n        for (idx = 0; idx < props.bar_data.length; idx++) {\n            var uuid = idx.toString()\n            // passing in key, to get rid of error\n            bars.push(<SingleBarGraph uuid={uuid} key={uuid} />)\n        }\n        return (\n            <>\n                {bars}\n            </>\n        )\n    }\n\n    function x_axis_layout() {\n        var days = [\"Sat\", \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\"];\n        var days_layout = []\n        var idx = 0;\n        for (idx = 0; idx < days.length; idx++) {\n            days_layout.push(<Text style={styles.day} key={idx.toString()}>{days[idx]}</Text>);\n        }\n        return (\n            <>\n                {days_layout}\n            </>\n        )\n    }\n\n    if (!props.dataLoaded) {\n        return (\n            <>\n                <View style={{...styles.plot_container, justifyContent: \"center\", alignContent: \"center\"}}>\n                    <ActivityIndicator />\n                </View>\n                <View style={styles.x_axis}>\n                    {x_axis_layout()}\n                </View>\n            </>\n        )\n    } else {\n        return (\n            <>\n                <View style={styles.plot_container}>\n                    <DashedLine />\n                    <Animated.View {...panResponder.panHandlers}>\n                        <View style={styles.values_container}>\n                            {bar_layout()}\n                        </View>\n                    </Animated.View>\n                </View>\n\n                <View style={styles.x_axis}>\n                    {x_axis_layout()}\n                </View>\n            </>\n        )\n    }\n\n}\n\nconst styles = StyleSheet.create({\n    plot_container: {\n        height: 150\n    },\n    values_container: {\n        /* each bar should be next to each other*/\n        flexDirection: \"row\",\n        /* the bar should be at the bottom where the container ends */\n        alignItems: \"flex-end\",\n        justifyContent: \"center\",\n        /* match the height of the container*/\n        height: \"100%\",\n    },\n    x_axis: {\n        backgroundColor: theme.subtlePrimary,\n        height: 30,\n        flexDirection: \"row\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        opacity: 0.7\n    },\n    day: {\n        marginHorizontal: 12\n    },\n});\n\n\nfunction mapStateToProps(state) {\n    return {\n        bar_data: state.TransactionsReducer.bar_data,\n        meta: state.TransactionsReducer.meta_data,\n        curDate: state.TransactionsReducer.meta_data.fullDate,\n        dataLoaded: state.BarSummaryReducer.dataLoaded\n\n    }\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        clearEnabledBars: () => dispatch({ type: \"CLEAR_ENABLED_BARS\" }),\n        changeCurWeek: (direction) => dispatch({ type: \"CHANGE_CUR_WEEK\", direction: direction }),\n        clearDataLoaded: () => dispatch({ type: \"CLEAR_TOTAL_EXPENSES_LOADED\" }),\n        clearAccountInfo: () => dispatch({ type: \"CLEAR_ACCOUNT_INFO\" })\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(BarGraph)"]},"metadata":{},"sourceType":"module"}